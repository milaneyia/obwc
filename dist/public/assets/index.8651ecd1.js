var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;import{d as o,m as l,c as d,a as c,w as u,F as m,r as p,b as g,o as f,t as v,e as b,T as h,f as T,g as A,h as E,i as _,j as w,k as S,l as y,n as I,p as D,q as C,s as x,u as k,v as O,x as P,y as N}from"./vendor.437caaf2.js";var R,j,U,L;(j=R||(R={}))[j.Mappers=1]="Mappers",j[j.Players=2]="Players",(L=U||(U={}))[L.Standard=1]="Standard",L[L.Taiko=2]="Taiko",L[L.Catch=3]="Catch",L[L.Mania=4]="Mania";const M="UPDATE_ROUNDS",G="UPDATE_TEAMS";var F=o({name:"ProfilePopup",emits:["navigate"],computed:l({user:e=>e.loggedInUser}),methods:{async accept(e){await this.$http.post(`/api/teams/${e}/acceptInvitation`),await this.$store.dispatch("SET_INITIAL_DATA")}}});const B={class:"card card-body small position-absolute profile text-start me-sm-3 pt-4 bg-dark border-2 border-primary"},J={class:"d-flex align-items-center justify-content-between"},V=c("div",null,"FOR TEAM CREATION, CLICK HERE",-1),q=c("i",{class:"fas fa-arrow-right mx-2"},null,-1),H=b(" CREATE A TEAM "),z=c("div",{class:"border-bottom my-3"}," ANY TEAM INVITATIONS WILL APPEAR BELOW ",-1),$={class:"mx-4"};F.render=function(e,t,s,a,n,i){const r=g("router-link");return f(),d("div",B,[c("div",J,[V,q,c(r,{to:{name:"team-creation"},class:"btn btn-sm btn-outline-yellow",onClick:t[1]||(t[1]=t=>e.$emit("navigate"))},{default:u((()=>[H])),_:1})]),z,(f(!0),d(m,null,p(e.user.invitations,(t=>(f(),d("div",{key:t.id,class:"card card-body flex-column flex-sm-row align-items-center bg-yellow text-dark py-2 px-3 my-2"},[c("div",{class:"avatar",style:`background-image: url(https://a.ppy.sh/${t.captain.osuId})`},null,4),c("div",$,[c("div",null,v(t.captain.username)+" INVITES YOU TO JOIN ",1),c("div",null,v(t.name),1)]),c("button",{class:"btn btn-sm btn-dark text-yellow",disabled:Boolean(e.user.teamId),onClick:s=>e.accept(t.id)},v(e.user.teamId===t.id?"ACCEPTED":"ACCEPT"),9,["disabled","onClick"])])))),128))])};var Y=o({computed:l({toastMessages:e=>e.toasts.toastMessages}),methods:{getToastTypeClass:e=>"success"===e.type?"bg-success":"info"===e.type?"bg-info":"bg-danger"}});const W={class:"position-fixed bottom-0 w-100",style:{"z-index":"1090"}},Z={class:"position-relative"},Q={class:"toast-container position-absolute bottom-0 start-50 translate-middle-x p-3"},K={class:"toast-body"};Y.render=function(e,t,s,a,n,i){return f(),d("div",W,[c("div",Z,[c("div",Q,[c(h,{name:"component-fade"},{default:u((()=>[(f(!0),d(m,null,p(e.toastMessages,((t,s)=>(f(),d("div",{key:s,class:["toast show d-flex align-items-center",e.getToastTypeClass(t)],"data-bs-autohide":"true"},[c("div",K,v(t.message),1)],2)))),128))])),_:1})])])])};var X,ee,te=o({name:"App",components:{ToastMessages:Y,ProfilePopup:F},data:()=>({showProfilePopup:!1}),computed:(X=((e,t)=>{for(var s in t||(t={}))n.call(t,s)&&r(e,s,t[s]);if(a)for(var s of a(t))i.call(t,s)&&r(e,s,t[s]);return e})({},l({user:e=>e.loggedInUser,rounds:e=>e.rounds})),ee={currentContest(){return this.$store.getters.currentContest},isValidCaptain(){var e,t;return(null==(t=null==(e=this.user)?void 0:e.captainFor)?void 0:t.wasConfirmed)||!1},isRegistrationOpen(){return!!this.currentContest&&new Date>=new Date(this.currentContest.registrationStartedAt)&&new Date<new Date(this.currentContest.registrationEndedAt)},isResultsTime(){return!!this.rounds.length&&new Date(this.rounds[0].resultsAt)<new Date},standardId:()=>U.Standard,taikoId:()=>U.Taiko},t(X,s(ee)))});const se={class:"nav navbar navbar-expand-md navbar-dark bg-dark navbar-custom"},ae=c("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTarget"},[c("span",{class:"navbar-toggler-icon"})],-1),ne={id:"navbarTarget",class:"collapse navbar-collapse px-3"},ie={class:"navbar-nav me-auto"},re={class:"nav-item"},oe=b(" MAIN "),le={class:"nav-item"},de=b(" INFO "),ce={key:0,class:"nav-item"},ue=b(" TEAMS "),me={key:1,class:"nav-item"},pe=b(" RESULTS "),ge={class:"nav-item"},fe=b(" SUBMISSIONS "),ve={key:2,class:"nav-item"},be=b(" TEAM CREATION "),he={key:3,class:"nav-item dropdown"},Te=c("a",{id:"navbarDropdown",class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown"}," MANAGEMENT ",-1),Ae={class:"dropdown-menu"},Ee=b(" Contests "),_e=b(" Teams (STD) "),we=b(" Teams (Taiko) "),Se=b(" Logs "),ye={class:"navbar-nav flex-row"},Ie={key:0,class:"nav-item"},De=c("a",{class:"nav-link",href:"/api/login"}," LOGIN ",-1),Ce={class:"nav-item"},xe={key:0,class:"fas fa-exclamation-circle text-danger"},ke=c("li",{class:"nav-item px-2"},[c("a",{class:"nav-link",href:"/api/logout"}," LOGOUT ")],-1),Oe=_('<footer class="footer mt-auto bg-dark"><div class="d-flex justify-content-between align-items-center pe-3"><div class="d-flex w-100 align-items-center"><a href="https://2020.obwc.net" target="_blank" class="me-4"><div class="footer__obwc-img"></div></a><a href="https://discord.gg/CZp4bNx" target="_blank" class="footer__link"><i class="fab fa-discord fa-2x me-4"></i></a><a href="https://twitter.com/osubwc" target="_blank" class="footer__link"><i class="fab fa-twitter fa-2x me-4"></i></a><a href="https://www.twitch.tv/osubwc" target="_blank" class="footer__link"><i class="fab fa-twitch fa-2x"></i></a></div><div class="d-none d-sm-block w-100 text-end"> osu! Beatmapping World Championship </div></div></footer>',1);te.render=function(e,t,s,a,n,i){var r;const o=g("router-link"),l=g("profile-popup"),p=g("router-view"),h=g("toast-messages");return f(),d(m,null,[c("nav",se,[ae,c("div",ne,[c("ul",ie,[c("li",re,[c(o,{class:"nav-link",to:{name:"home"}},{default:u((()=>[oe])),_:1})]),c("li",le,[c(o,{class:"nav-link",to:"/info"},{default:u((()=>[de])),_:1})]),e.isRegistrationOpen?T("",!0):(f(),d("li",ce,[c(o,{class:"nav-link",to:{name:"teams"}},{default:u((()=>[ue])),_:1})])),e.isResultsTime?(f(),d("li",me,[c(o,{class:"nav-link",to:{name:"results",params:{id:1}}},{default:u((()=>[pe])),_:1})])):T("",!0),c("li",ge,[e.isValidCaptain?(f(),d(o,{key:0,class:"nav-link",to:{name:"submissions"}},{default:u((()=>[fe])),_:1})):T("",!0)]),e.user&&!e.user.team&&e.isRegistrationOpen?(f(),d("li",ve,[c(o,{class:"nav-link",to:{name:"team-creation"}},{default:u((()=>[be])),_:1})])):T("",!0),(null==(r=e.user)?void 0:r.isStaff)?(f(),d("li",he,[Te,c("ul",Ae,[c("li",null,[c(o,{class:"dropdown-item",to:{name:"staff-contests"}},{default:u((()=>[Ee])),_:1})]),c("li",null,[c(o,{class:"dropdown-item",to:{name:"staff-teams",params:{id:e.standardId}}},{default:u((()=>[_e])),_:1},8,["to"])]),c("li",null,[c(o,{class:"dropdown-item",to:{name:"staff-teams",params:{id:e.taikoId}}},{default:u((()=>[we])),_:1},8,["to"])]),c("li",null,[c(o,{class:"dropdown-item",to:{name:"staff-logs"}},{default:u((()=>[Se])),_:1})])])])):T("",!0)])]),c("ul",ye,[e.user?(f(),d(m,{key:1},[c("li",Ce,[c("a",{class:"nav-link px-2",href:"#",onClick:t[1]||(t[1]=A((t=>e.showProfilePopup=!e.showProfilePopup),["prevent"]))},[e.user.teamId||e.user.captainFor?T("",!0):(f(),d("i",xe)),b(" "+v(e.user.username),1)])]),ke],64)):(f(),d("li",Ie,[De]))]),c(E,{name:"component-fade"},{default:u((()=>[e.showProfilePopup?(f(),d(l,{key:0,onNavigate:t[2]||(t[2]=t=>e.showProfilePopup=!1)})):T("",!0)])),_:1})]),c(p,null,{default:u((({Component:e})=>[c(E,{name:"component-fade",mode:"out-in"},{default:u((()=>[(f(),d(w(e),{class:"pt-4 px-sm-4",style:{"padding-bottom":"calc(1.5rem + 40px)"}}))])),_:2},1024)])),_:1}),Oe,c(h)],64)};const Pe={mounted(e,t){new S(e,{title:t.value||"",placement:t.arg||"top",trigger:"hover"})}};let Ne;const Re={},je=function(e,t){if(!t)return e();if(void 0===Ne){const e=document.createElement("link").relList;Ne=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in Re)return;Re[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":Ne,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))};var Ue=o({name:"HomeInfo",computed:{schedule(){return this.$store.getters.schedule}},methods:{formatDate:e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit"}):"--"}});const Le={class:"card card-section h-100"},Me={class:"card-body d-flex flex-column justify-content-between"},Ge=c("div",{class:"home-logo"},null,-1),Fe={class:"px-2"},Be={key:0,class:"bg-white text-dark rounded-pill p-1 text-center text-uppercase fw-bold my-2"},Je=c("a",{class:"box-link",href:"https://osu.ppy.sh/community/forums/topics/1312490",target:"_blank"},null,-1);Ue.render=function(e,t,s,a,n,i){return f(),d("div",Le,[c("div",Me,[Ge,c("div",Fe,[e.schedule?(f(),d("div",Be,v(e.formatDate(e.schedule.announcement))+" - "+v(e.formatDate(e.schedule.results)),1)):T("",!0),Je])])])};var Ve=o({name:"HomePrizes",data:()=>({prizes:[{supporter:8,bg:"background-color: #facb5b",text:"text-dark",sup:"st"},{supporter:6,bg:"background-color: #75b6e5",text:"text-white",sup:"nd"},{supporter:4,bg:"background-color: #5c5c5c",text:"text-white",sup:"rd"},{supporter:2,bg:"background-color: #9188c2",text:"text-white"}],badges:["/assets/badge_1.468f6cc3.png","/assets/badge_2.dd7fc265.png","/assets/badge_3.3a707122.png","/assets/badge_4.69e5db5f.png"]}),methods:{getImgSrc(e){return this.badges[e]}}});const qe={class:"card card-section h-100"},He=_('<div class="card-header"><div class="card-header-back"> Prizes </div><div class="card-header-sub"><div class="card-header-title"> PRIZES </div><div class="card-header-subtitle"> SUPPORTER TAGS ARE FOR EACH MEMBER </div></div></div>',1),ze={class:"card-body d-flex"},$e={class:"row row-cols-1 row-cols-xxl-2 g-4"},Ye={class:"row align-items-center g-0"},We={key:0,class:"prize__place"},Ze={class:"fs-1"},Qe={class:"fs-3"},Ke=c("div",null,"PLACE",-1),Xe={key:1,class:"prize__players text-start fs-1"},et=c("div",null," PLAYERS' ",-1),tt=c("div",null,"PICK",-1),st={class:"col-8"},at={class:"prize__detail w-100"},nt=c("div",{class:"my-2"},[c("i",{class:"fas fa-plus fa-2x"})],-1),it=c("div",null,"OSU!SUPPORTER",-1);Ve.render=function(e,t,s,a,n,i){return f(),d("div",qe,[He,c("div",ze,[c("div",$e,[(f(!0),d(m,null,p(e.prizes,((t,s)=>(f(),d("div",{key:s,class:"col"},[c("div",{class:["card card-body text-dark text-center py-4 px-0 rounded-3 prize fw-bold h-100 justify-content-around",t.text],style:t.bg},[c("div",Ye,[c("div",{class:["col-4 border-2 border-end h-100 d-flex justify-content-center align-items-center",0===s?"border-dark":"border-white"]},[s<3?(f(),d("div",We,[c("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAiCAYAAAA3WXuFAAACHElEQVRYhe2Xv2sUQRTHP3uXu9xCYnGaIFhZSFLEJmdhq6KkuCKGUzTBFAGLIAipBBFEbESCoCmCNhZamCKQVPkD7ip/gWARiCCBQBQECwOKRZQnb4+5Yff2xy23Qe5b7c7Oe/PZ77ydmXXK5TIp6BgwAzzsNFUuDRrgAXAPON5pojSATqs7JWAxayCJXwIcvZ8CzmQJNAucstqeAH1JE+Zd160AuwliDwFrwIDVPgx8Ad4myFkRh24BEwmC7wBHA57dBw7HzHceuC1A7/RNqzGCTwA32zwXmLsx8okh68B7AaoD/cAqMBkxwSONaad5YCxCrqrCuMKS07n+CRSBFaAWkuBCRDelsB+H9LmoRsjYv4HXOe9CO8iDV8CVgASFCIOYOtvG9ZoaUNT7N8Av77OvGx3zwEvgmk+SG8BoDCB0ektW21V98YLR1sBYhxpWgEA9B+aMtqGYhepJtpMF417Wrhc6hql/pnib6yDw3afTHy3Op8Az4HoCINGeOjuhuexx9oEjwuCtqD+AD8C41VG2hGVgxHIrrmTx3NCvzvGJ/aiGtGwd9YBBHLXcfqu4OhkAg1kyUYC6IV8gu7C7qaYZJtBXYCsDmM/Ajh8QGU1by8zYQFlMW4sJB96hTwkPa0n1Ddg0Y/2OmrKsn+sS0LbuBk2l9V+WmtL6L/t/gewamo5xjE1Tl4OAZAO8lAFQU70aClMPKEwHCwj4CwqNUGta1tKrAAAAAElFTkSuQmCC",class:"img-fluid",style:[{"max-height":"28px"},0!==s?"filter: invert(1)":""]},null,4),c("div",Ze,[b(v(s+1),1),c("sup",Qe,v(t.sup),1)]),Ke])):(f(),d("div",Xe,[et,tt]))],2),c("div",st,[c("div",at,[c("div",{class:"prize__badge",style:{"background-image":"url("+e.getImgSrc(s)+")"}},null,4),nt,c("div",null,v(t.supporter)+" MONTHS",1),it])])])],6)])))),128))])])])};var rt={props:{title:{type:String,required:!0},plus:{type:Boolean,default:!1},cardClass:{type:Array,default:()=>["fs-sm","border","border-purple","mb-2","card-schedule"]},headerClass:{type:Array,default:()=>["text-center","bg-purple","p-0","fw-bold"]},bodyClass:{type:Array,default:()=>["d-flex","justify-content-center"]}}};const ot={key:0,class:"card-body--plus"};var lt,dt;function ct(e){return e<10?"0"+e:e}rt.render=function(e,t,s,a,n,i){return f(),d("div",{class:["card",s.cardClass]},[c("div",{class:["card-header",s.headerClass]},v(s.title),3),c("div",{class:["card-body",s.bodyClass]},[s.plus?(f(),d("div",ot,[(f(),d(m,null,p(4,(e=>c("i",{key:e,class:"fas fa-plus"}))),64))])):T("",!0),y(e.$slots,"default")],2)],2)},(dt=lt||(lt={})).Date="DATE",dt.Input="INPUT",dt.Locale="LOCALE";var ut=o({name:"TimeString",props:{timestamp:{type:[String,Date],required:!0},div:{type:Boolean},format:{type:String,default:lt.Date}},computed:{tooltipDate(){return new Date(this.timestamp).toLocaleString("en-US",{timeZoneName:"short"})}},methods:{shortDateTimeString(e){return e?this.$formatDate(e,this.format):""}}});const mt={key:0},pt={key:1};ut.render=function(e,t,s,a,n,i){const r=D("bs-tooltip");return e.div?I((f(),d("div",mt,[b(v(e.shortDateTimeString(e.timestamp)),1)],512)),[[r,e.tooltipDate]]):I((f(),d("span",pt,[b(v(e.shortDateTimeString(e.timestamp)),1)],512)),[[r,e.tooltipDate]])};var gt=o({name:"HomeSchedule",components:{TimeString:ut,Card:rt},computed:{currentContest(){return this.$store.getters.currentContest},schedule(){return this.$store.getters.schedule}},async created(){this.currentContest&&await this.$store.dispatch("UPDATE_ROUNDS",this.currentContest.id)}});const ft={class:"card card-section h-100"},vt=_('<div class="card-header"><div class="card-header-back"> Schedule </div><div class="card-header-sub"><div class="card-header-title"> SCHEDULE </div><div class="card-header-subtitle"> DATES ARE IN YOUR LOCAL TIMEZONE </div></div></div>',1),bt={key:0,class:"card-body"},ht={class:"d-flex justify-content-between align-items-center fs-sm mb-2 px-3 py-0"},Tt=c("div",null,"OBWC ANNOUNCEMENT",-1),At={class:"d-flex justify-content-between align-items-center fs-sm border border-yellow rounded-3 mb-2 px-3 py-0"},Et=c("div",null,"REGISTRATION PHASE",-1),_t={class:"d-flex justify-content-between align-items-center "},wt=c("div",{class:"fs-xs text-yellow"}," START ",-1),St={class:"ms-3"},yt={class:"d-flex justify-content-between align-items-center "},It=c("div",{class:"fs-xs text-yellow"}," END ",-1),Dt={class:"ms-3"},Ct={class:"d-flex justify-content-between align-items-center border-yellow border-bottom-dashed"},xt=c("div",null,"MAPPING PHASE",-1),kt={class:"d-flex justify-content-between align-items-center "},Ot=c("div",{class:"fs-xs text-yellow"}," START ",-1),Pt={class:"ms-3"},Nt={class:"d-flex justify-content-between align-items-center "},Rt=c("div",{class:"fs-xs text-yellow"}," END ",-1),jt={class:"ms-3"},Ut={class:"d-flex justify-content-between align-items-center border-yellow"},Lt=c("div",null,"JUDGING PHASE",-1),Mt={class:"d-flex justify-content-between align-items-center "},Gt=c("div",{class:"fs-xs text-yellow"}," START ",-1),Ft={class:"ms-3"},Bt={class:"d-flex justify-content-between align-items-center "},Jt=c("div",{class:"fs-xs text-yellow"}," END ",-1),Vt={class:"ms-3"},qt={key:0,class:"d-flex justify-content-between align-items-center fs-sm mb-2 px-3 py-0"},Ht=c("div",null,"RESULTS ANNOUNCEMENT + LIVESTREAM",-1);gt.render=function(e,t,s,a,n,i){const r=g("time-string"),o=g("card");return f(),d("div",ft,[vt,e.schedule?(f(),d("div",bt,[c("div",ht,[Tt,c(r,{div:"",timestamp:e.schedule.announcement},null,8,["timestamp"])]),c("div",At,[Et,c("div",null,[c("div",_t,[wt,c("div",St,[c(r,{div:"",timestamp:e.schedule.registration[0]},null,8,["timestamp"])])]),c("div",yt,[It,c("div",Dt,[c(r,{div:"",timestamp:e.schedule.registration[1]},null,8,["timestamp"])])])])]),(f(!0),d(m,null,p(e.schedule.rounds,((e,t)=>(f(),d(o,{key:t,title:e.title,"card-class":["fs-sm","border","border-yellow","mb-2","card-schedule"],"header-class":["text-center","bg-yellow","text-dark","p-0","fw-bold"],"body-class":["d-flex","flex-column","px-3","py-0"]},{default:u((()=>[c("div",Ct,[xt,c("div",null,[c("div",kt,[Ot,c("div",Pt,[c(r,{div:"",timestamp:e.mapping[0]},null,8,["timestamp"])])]),c("div",Nt,[Rt,c("div",jt,[c(r,{div:"",timestamp:e.mapping[1]},null,8,["timestamp"])])])])]),c("div",Ut,[Lt,c("div",null,[c("div",Mt,[Gt,c("div",Ft,[c(r,{div:"",timestamp:e.judging[0]},null,8,["timestamp"])])]),c("div",Bt,[Jt,c("div",Vt,[c(r,{div:"",timestamp:e.judging[1]},null,8,["timestamp"])])])])])])),_:2},1032,["title"])))),128)),e.schedule.results?(f(),d("div",qt,[Ht,c(r,{div:"",timestamp:e.schedule.results},null,8,["timestamp"])])):T("",!0)])):T("",!0)])};var zt=o({name:"Home",components:{HomeInfo:Ue,HomePrizes:Ve,HomeSchedule:gt}});const $t={class:"container-fluid"},Yt={class:"row gy-2"},Wt={class:"col-md-6 col-xl-3"},Zt={class:"col-md-6 col-xl-5"},Qt={class:"col-md-12 col-xl-4"};zt.render=function(e,t,s,a,n,i){const r=g("home-info"),o=g("home-prizes"),l=g("home-schedule");return f(),d("div",$t,[c("div",Yt,[c("div",Wt,[c(r)]),c("div",Zt,[c(o)]),c("div",Qt,[c(l)])])])};const Kt=[{path:"/",component:zt,alias:"/main",name:"home"},{path:"/info",component:()=>je((()=>import("./Info.2f704eda.js")),["/assets/Info.2f704eda.js","/assets/vendor.437caaf2.js"]),name:"info",meta:{title:"Info | o!bwc"}},{path:"/teams",component:()=>je((()=>import("./Teams.4453d445.js")),["/assets/Teams.4453d445.js","/assets/Teams.2c19252b.css","/assets/vendor.437caaf2.js"]),name:"teams",meta:{title:"Teams | o!bwc"}},{path:"/results",component:()=>je((()=>import("./Results.d6c576ee.js")),["/assets/Results.d6c576ee.js","/assets/Results.c7d9bf0f.css","/assets/vendor.437caaf2.js","/assets/DataTable.e3358bee.js","/assets/ModeButton.a43c0c8e.js","/assets/ModeButton.d6dd8623.css"]),name:"results",meta:{title:"Results | o!bwc"}},{path:"/teams/create",component:()=>je((()=>import("./TeamCreation.8ca416b7.js")),["/assets/TeamCreation.8ca416b7.js","/assets/ModeButton.d6dd8623.css","/assets/vendor.437caaf2.js","/assets/ModeButton.a43c0c8e.js"]),name:"team-creation",meta:{title:"Team Creation | o!bwc",requiresAuth:!0}},{path:"/judging",component:()=>je((()=>import("./Judging.3cac2be3.js")),["/assets/Judging.3cac2be3.js","/assets/Judging.14d259c2.css","/assets/vendor.437caaf2.js","/assets/DataTable.e3358bee.js"]),name:"judging",meta:{title:"Judging | o!bwc",requiresAuth:!0}},{path:"/submissions",component:()=>je((()=>import("./Submissions.9f15145a.js")),["/assets/Submissions.9f15145a.js","/assets/vendor.437caaf2.js","/assets/DataTable.e3358bee.js"]),name:"submissions",meta:{title:"Submissions | o!bwc",requiresAuth:!0}},{path:"/staff/contests/:id?/teams",alias:"/staff/teams",component:()=>je((()=>import("./StaffTeams.d37639d3.js")),["/assets/StaffTeams.d37639d3.js","/assets/DataTable.e3358bee.js","/assets/vendor.437caaf2.js"]),name:"staff-teams",meta:{title:"Teams - Staff",requiresStaff:!0}},{path:"/staff/contests",component:()=>je((()=>import("./StaffContests.7d785c87.js")),["/assets/StaffContests.7d785c87.js","/assets/DataTable.e3358bee.js","/assets/vendor.437caaf2.js"]),name:"staff-contests",meta:{title:"Contests - Staff",requiresStaff:!0}},{path:"/staff/contests/:id/rounds",component:()=>je((()=>import("./StaffRounds.1b688e6a.js")),["/assets/StaffRounds.1b688e6a.js","/assets/DataTable.e3358bee.js","/assets/vendor.437caaf2.js"]),name:"staff-rounds",meta:{title:"Rounds - Staff",requiresStaff:!0}},{path:"/staff/rounds/:id/submissions",component:()=>je((()=>import("./StaffSubmissions.06c96385.js")),["/assets/StaffSubmissions.06c96385.js","/assets/DataTable.e3358bee.js","/assets/vendor.437caaf2.js"]),name:"staff-submissions",meta:{title:"Rounds - Staff",requiresStaff:!0}},{path:"/staff/rounds/:id/judging",component:()=>je((()=>import("./StaffJudging.8be1d4d3.js")),["/assets/StaffJudging.8be1d4d3.js","/assets/DataTable.e3358bee.js","/assets/vendor.437caaf2.js"]),name:"staff-judging",meta:{title:"Judging - Staff",requiresStaff:!0}},{path:"/staff/logs",component:()=>je((()=>import("./StaffLogs.ee82bdf0.js")),["/assets/StaffLogs.ee82bdf0.js","/assets/DataTable.e3358bee.js","/assets/vendor.437caaf2.js"]),name:"staff-logs",meta:{title:"Logs - Staff",requiresStaff:!0}},{path:"/login",component:()=>je((()=>import("./Login.27713302.js")),["/assets/Login.27713302.js","/assets/vendor.437caaf2.js"]),name:"401",meta:{title:"Login to continue"}},{path:"/:pathMatch(.*)*",component:()=>je((()=>import("./NotFound.d02082c9.js")),["/assets/NotFound.d02082c9.js","/assets/vendor.437caaf2.js"]),name:"404",meta:{title:"Oops"}}],Xt=C.create();Xt.interceptors.response.use((e=>("get"!==e.config.method&&"GET"!==e.config.method&&is.dispatch("addToastMessage",{message:e.data.success||e.statusText,type:"success"}),e)),(e=>{let t="Something went wrong!";if(e.response)switch(e.response.status){case 400:t=e.response.data.error||"Invalid request";break;case 401:t="May need to log in first";break;case 403:t="Unauthorized"}else t="Something went really wrong";return is.dispatch("addToastMessage",t),Promise.reject(t)}));const es="INIT_DATA",ts="SET_NEW_JUDGING",ss="SELECT_FOR_EDITING",as="SAVE";function ns(e){switch(e){case 1:return"FIRST";case 2:return"SECOND";case 3:return"THIRD";case 4:return"FOURTH";case 5:return"FIFTH";default:return e.toString()}}const is=x({modules:{judging:{namespaced:!0,state:{currentRound:null,criterias:[],judgingDone:[],originalJudging:null,newJudging:null},mutations:{INIT_DATA(e,t){e.currentRound=t.currentRound||null,e.criterias=t.criterias||[],e.judgingDone=t.judgingDone||[]},SET_ORIGINAL_JUDGING(e,t){e.originalJudging=t},SET_NEW_JUDGING(e,t){e.newJudging=t}},getters:{getJudgingToCriterias:e=>t=>{const s=e.judgingDone.find((e=>e.submissionId===t.submissionId));if(!s)return null;const a=s.judgingToCriterias.find((e=>e.criteriaId===t.criteriaId));return a||null},getJudgingForEditing:e=>t=>{const s={judging:{submission:t.submission,comment:""},judgingToCriteria:{criteria:t.criteria,score:1,comment:""}},a=e.judgingDone.find((e=>e.submissionId===t.submission.id));if(!a)return s;s.judging.comment=a.comment;const n=a.judgingToCriterias.find((e=>e.criteriaId===t.criteria.id));return n?(s.judgingToCriteria.score=n.score,s.judgingToCriteria.comment=n.comment,s):s}},actions:{async INIT_DATA({commit:e}){const{data:t}=await Xt.get("/api/judging");e("INIT_DATA",t)},SELECT_FOR_EDITING({commit:e,getters:t},s){const a=t.getJudgingForEditing({submission:s.submission,criteria:s.criteria});e("SET_NEW_JUDGING",a),e("SET_ORIGINAL_JUDGING",a)},async SAVE({dispatch:e,state:t}){t.newJudging&&(await Xt.post("/api/judging",t.newJudging),await e("INIT_DATA"),e("SELECT_FOR_EDITING",{submission:t.newJudging.judging.submission,criteria:t.newJudging.judgingToCriteria.criteria}))}}},toasts:{namespaced:!1,state:{toastMessages:[]},mutations:{addToastMessage(e,t){e.toastMessages.push(t)},removeFirstToastMessage(e){e.toastMessages.splice(0,1)}},actions:{addToastMessage({commit:e},t){"string"==typeof t&&(t={message:t}),e("addToastMessage",t),setTimeout((()=>{e("removeFirstToastMessage")}),4e3)}}}},state:{initialized:!1,loggedInUser:null,contestMode:U.Standard,contests:[],rounds:[],teams:[]},mutations:{SET_INITIALIZED(e){e.initialized=!0},UPDATE_USER(e,t){e.loggedInUser=t||null},UPDATE_CONTESTS(e,t){e.contests=t},UPDATE_ROUNDS(e,t){e.rounds=t||[]},UPDATE_TEAMS(e,t){e.teams=t},UPDATE_CONTEST_MODE(e,t){e.contestMode=t}},getters:{currentContest:e=>e.contests.find((t=>t.id===e.contestMode)),schedule(e,t){if(!t.currentContest)return;const s={announcement:t.currentContest.announcementAt,registration:[t.currentContest.registrationStartedAt,t.currentContest.registrationEndedAt],rounds:[],results:null};return e.rounds.length&&(s.rounds=e.rounds.map((e=>({title:ns(e.id)+" ROUND",mapping:[e.submissionsStartedAt,e.submissionsEndedAt],judging:[e.judgingStartedAt,e.judgingEndedAt]}))),s.results=e.rounds[e.rounds.length-1].resultsAt),s},currentSubmissionRound:e=>e.rounds.find((e=>new Date>=new Date(e.submissionsStartedAt)&&new Date<new Date(e.submissionsEndedAt)))},actions:{async SET_INITIAL_DATA({commit:e,dispatch:t}){await Promise.all([t("UPDATE_USER"),t("UPDATE_CONTESTS")]),e("SET_INITIALIZED")},async UPDATE_USER({commit:e}){const{data:t}=await Xt.get("/api/users/me");e("UPDATE_USER",t)},async UPDATE_CONTESTS({commit:e}){const{data:t}=await Xt.get("/api/contests");e("UPDATE_CONTESTS",t)},async UPDATE_ROUNDS({commit:e},t){const{data:s}=await Xt.get(`/api/contests/${t}/rounds`);e("UPDATE_ROUNDS",s)},async UPDATE_TEAMS({commit:e,state:t}){const{data:s}=await Xt.get(`/api/contests/${t.contestMode}/teams`);e("UPDATE_TEAMS",s)},UPDATE_CONTEST_MODE({commit:e},t){e("UPDATE_CONTEST_MODE",t)}},strict:!1}),rs=k({history:O(),routes:Kt,linkActiveClass:"active"});rs.beforeEach((async(e,t,s)=>{var a;if(document.title=e.meta.title||"osu! Beatmapping World Championship",!is.state.initialized){let t=localStorage.getItem("contestMode")?U[localStorage.getItem("contestMode")]:U.Standard,s=e.query.mode&&e.query.mode.toString();s&&(s=s[0].toUpperCase()+s.substring(1),s in U&&(t=U[s])),is.dispatch("UPDATE_CONTEST_MODE",t),await is.dispatch("SET_INITIAL_DATA")}return e.meta.requiresAuth&&!is.state.loggedInUser?s({name:"401",query:{redirect:e.path}}):e.meta.requiresStaff&&!(null==(a=is.state.loggedInUser)?void 0:a.isStaff)?s({name:"404"}):void s()}));const os=new P;let ls=os.renderer.rules.link_open||function(e,t,s,a,n){return n.renderToken(e,t,s)};os.renderer.rules.link_open=function(e,t,s,a,n){const i=e[t].attrIndex("target");if(i<0)e[t].attrPush(["target","_blank"]);else{const s=e[t].attrs;s&&(s[i][1]="_blank")}return ls(e,t,s,a,n)},ls=os.renderer.rules.table_open||function(e,t,s,a,n){return n.renderToken(e,t,s)},os.renderer.rules.table_open=function(e,t,s,a,n){return e[t].attrPush(["class","table table-dark w-auto mx-auto table-hover"]),ls(e,t,s,a,n)},ls=os.renderer.rules.heading_open||function(e,t,s,a,n){return n.renderToken(e,t,s)},os.renderer.rules.heading_open=function(e,t,s,a,n){return e[t].attrPush(["class","border-bottom mb-4"]),ls(e,t,s,a,n)};const ds=N(te);ds.use(rs),ds.use(is),ds.config.globalProperties.$http=Xt,ds.config.globalProperties.$md=os,ds.config.globalProperties.$formatDate=function(e,t=lt.Input){const s=new Date(e),a=ct(s.getMonth()+1),n=ct(s.getDate()),i=ct(s.getHours()),r=ct(s.getMinutes());return t===lt.Input?`${s.getFullYear()}-${a}-${n}T${i}:${r}`:t===lt.Date?`${s.getFullYear()}-${a}-${n}`:t===lt.Locale?s.toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric"}):s.toLocaleString()},ds.directive("bs-tooltip",Pe),ds.mount("#app");export{U as C,lt as D,es as I,R as J,ts as S,G as U,rt as _,M as a,ut as b,as as c,ss as d};
