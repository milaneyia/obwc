import{_ as t}from"./DataTable.e3358bee.js";import{d as e,o as a,c as n,a as s,n as o,D as l,f as d,b as i,w as c,e as r}from"./vendor.437caaf2.js";import{D as m}from"./index.d9c9ff1c.js";var u=e({name:"StaffContestUpdate",props:{contestProp:{type:Object,default:()=>null}},emits:["update:contest"],data:()=>({contest:null}),watch:{contestProp(t){this.contest=t?{name:t.name,announcementAt:this.$formatDate(t.announcementAt),registrationStartedAt:this.$formatDate(t.registrationStartedAt),registrationEndedAt:this.$formatDate(t.registrationEndedAt)}:null}},methods:{async update(){if(!this.contest)return;const{data:t}=await this.$http.put(`/api/staff/contests/${this.contestProp.id}`,{name:this.contest.name,announcementAt:new Date(this.contest.announcementAt),registrationStartedAt:new Date(this.contest.registrationStartedAt),registrationEndedAt:new Date(this.contest.registrationEndedAt)});this.$emit("update:contest",t)}}});const p={class:"modal fade",tabindex:"-1"},f={class:"modal-dialog modal-lg"},b={class:"modal-content"},g=s("div",{class:"modal-header"},[s("h5",{class:"modal-title"}," Update Contest "),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),h={key:0,class:"modal-body"},A=s("hr",null,null,-1),v={class:"row mb-2"},y={class:"col-sm-12"},D={class:"form-group"},S=s("label",null,"Announcement Date",-1),C={class:"col-sm-6"},k={class:"form-group"},E=s("label",null,"Registration Start Date",-1),U={class:"col-sm-6"},w={class:"form-group"},$=s("label",null,"Registration End Date",-1),x={class:"modal-footer"},R=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);u.render=function(t,e,i,c,r,m){return a(),n("div",p,[s("div",f,[s("div",b,[g,t.contest?(a(),n("div",h,[o(s("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.contest.name=e),type:"text",class:"form-control mb-3",placeholder:"name"},null,512),[[l,t.contest.name]]),A,s("div",v,[s("div",y,[s("div",D,[S,o(s("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.contest.announcementAt=e),type:"datetime-local",class:"form-control"},null,512),[[l,t.contest.announcementAt]])])]),s("div",C,[s("div",k,[E,o(s("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.contest.registrationStartedAt=e),type:"datetime-local",class:"form-control"},null,512),[[l,t.contest.registrationStartedAt]])])]),s("div",U,[s("div",w,[$,o(s("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.contest.registrationEndedAt=e),type:"datetime-local",class:"form-control"},null,512),[[l,t.contest.registrationEndedAt]])])])])])):d("",!0),s("div",x,[R,s("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...e)=>t.update&&t.update(...e))}," Save changes ")])])])])};var j=e({name:"StaffContests",components:{DataTable:t,StaffContestUpdate:u},data:()=>({contests:[],selectedContest:null,fields:["id","name",{key:"announcementAt",label:"Announcement Date",formatter:m.Locale},{key:"registrationStartedAt",label:"Registration Start",formatter:m.Locale},{key:"registrationEndedAt",label:"Registration End",formatter:m.Locale}]}),async created(){const{data:t}=await this.$http.get("/api/contests");this.contests=t},methods:{update(t){const e=this.contests.findIndex((e=>e.id===t.id));-1!==e&&(this.contests[e]=t)}}});const V={class:"container"},_={class:"row"},L={class:"col-sm"},P=r(" Rounds "),T=r(" Teams ");j.render=function(t,e,o,l,d,r){const m=i("router-link"),u=i("data-table"),p=i("staff-contest-update");return a(),n("div",V,[s("div",_,[s("div",L,[s(u,{items:t.contests,fields:t.fields},{actions:c((({item:e})=>[s("button",{class:"btn btn-sm btn-primary me-2","data-bs-toggle":"modal","data-bs-target":"#contestUpdate",onClick:a=>t.selectedContest=e}," Edit ",8,["onClick"]),s(m,{class:"btn btn-sm btn-link me-2",to:{name:"staff-rounds",params:{id:e.id}}},{default:c((()=>[P])),_:2},1032,["to"]),s(m,{class:"btn btn-sm btn-link",to:{name:"staff-teams",params:{id:e.id}}},{default:c((()=>[T])),_:2},1032,["to"])])),_:1},8,["items","fields"])])]),s(p,{id:"contestUpdate","contest-prop":t.selectedContest,"onUpdate:contest":e[1]||(e[1]=e=>t.update(e))},null,8,["contest-prop"])])};export default j;
